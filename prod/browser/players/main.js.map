{"version":3,"sources":["webpack:///webpack/bootstrap 88b329507b2dab7af3e2","webpack:///./dev/browser/players/sequences.js","webpack:///./dev/browser/LoadJs.ts","webpack:///./dev/browser/locationInfo.ts","webpack:///./dev/browser/players/socketClientApp.ts","webpack:///./dev/browser/players/main.ts"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChEA;AAAA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA,KAAK;;;AAGL;;;AAGA;AACA;AACA;;;;AAIA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB,cAAc;AAC/B;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;;AAET;;AAEA;;;;;AAKA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,2BAA2B,gBAAgB;AAC3C,2BAA2B,gBAAgB;AAC3C,2BAA2B,gBAAgB;;AAE3C;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,qEAAqE;AACrE,SAAS;AACT;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;;;AAIL;;;;;;AAMA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;;;;AAKA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA,gDAAgD;AAChD;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,KAAK;AACL;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;AAGA;;;;;AAKA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,iBAAiB,WAAW;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA,iBAAiB,eAAe;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;;;AAIA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;;;;AAIA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,6CAA6C;AAC7C,KAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;;;AAIA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,qDAAqD;AACrD,6DAA6D;AAC7D;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,qBAAqB,eAAe;AACpC;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;;AAEA;;AAEA;AACA;;AAEA,qBAAqB;AACrB;AACA;;AAEA,gBAAgB,uBAAuB;AACvC;AACA,wDAAwD;AACxD,SAAS;AACT;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;;;;;;AAOA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,6CAA6C;AAC7C,6CAA6C;AAC7C;AACA,yBAAyB,0BAA0B;AACnD;AACA;AACA;;AAEA,SAAS;AACT;AACA,yBAAyB,0BAA0B;AACnD;AACA;AACA;AACA;;AAEA,qBAAqB,iBAAiB;AACtC,oEAAoE;AACpE;;AAEA,KAAK,OAAO;AACZ;AACA;AACA,6DAA6D;AAC7D;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL,eAAe;AACf;;AAEA;;AAEA;AACA;AACA;AACA,iBAAiB,kBAAkB;AACnC;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;;AAEA;AACA;AACA;;AAEA,mBAAmB,wBAAwB;AAC3C;AACA;;AAEA,iBAAiB,uBAAuB;AACxC;AACA;;AAEA,iBAAiB,yBAAyB;AAC1C;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;AC1wBA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACdA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACTA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,CAAC;AACD;;;;;;;;AC9EA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,4CAA4C,mCAAmC;AAC/E,4CAA4C,mCAAmC;AAC/E,kCAAkC,yBAAyB;AAC3D,mCAAmC,0BAA0B;AAC7D,oCAAoC,2BAA2B;AAC/D,sCAAsC,6BAA6B;AACnE,uCAAuC,8BAA8B","file":"./players/main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 88b329507b2dab7af3e2","/**\n * Created by mathi on 03/06/2017.\n */\n\n// Ce sont les morceaux de code qui sont appelés pendant le déroulement du jeu qui se passe dans script.js\n\nfunction Global(socket, sequence, callpackServer) {\n    this.socket = socket;\n    this.sequence = sequence;\n    this.emitToServer = callpackServer;\n}\n\nexport var _global = new Global(\"empty\", \"empty\", \"empty\");\n\n// fonction à lancer pour démarrer une phase de vote des lois\n// node server\nexport function startVote() {\n\n    clear();\n    background([0,0,255]);\n    displayTitle(\"Votation\");\n\n    setTimeout(function() {\n        if (premierTour) {\n            choisiDeuxMinistres(listeDesMinistresRestant);\n            // ici il faudrait lancer le son d'explication du vote\n            premierTour = false;\n        } else {\n            choisiDelegue(listeDesMinistresRestant);\n            var ministreActif = \"Ministre du Travail\";\n            var joueur = \"autre\"; // joueur === \"autre\" || \"ministreActif\" || \"delegue\"\n            voteDeConfiance(joueur, ministreActif);\n        }\n        // voteDeConfiance(listeDesMinistresRestant);\n    }, titleDuration);\n\n\n}\n\n\n// sauf au premier tour - choisi au hasard le délégué\n// node server\nexport function choisiDelegue(ministres) {\n\n\n\n    // on tire un nombre au hasard pour choisir le délégué\n    var index = Math.floor(Math.random()*ministres.length);\n    var delegue = ministres[index];\n\n    console.log(\"delegue \" + delegue);\n\n    // return delegue;\n}\n\n// si on est au premier tour, choisi les deux ministres qui seronts respectivement\n// ministre actif et délégué\n// node server\nexport function choisiDeuxMinistres(ministresRestants) {\n\n    // on crée une liste temporaire pour pouvoir en retirer le ministre actif\n    // la fonction concat permet d'assembler deux tableaux en un nouveau\n    var temp = [];\n    var ministresRestantsTemporaires = listeDesMinistresRestant.concat(temp);\n\n\n    // on tire un nombre au hasard pour choisir le ministre actif\n    var index = Math.floor(Math.random()*ministresRestantsTemporaires.length);\n    var ministreActif = ministresRestants[index];\n\n    // on enlève le ministre actif du tableau temporaire des ministres restants\n    var ministreARetirer = ministresRestantsTemporaires.indexOf(ministreActif);\n    ministresRestantsTemporaires.splice(ministreARetirer, 1);\n    // on tire un nombre au hasard pour choisir le délégué\n    index = Math.floor(Math.random()*ministresRestantsTemporaires.length);\n    var delegue = ministresRestantsTemporaires[index];\n\n\n    console.log(\"ministre actif \" + ministreActif);\n    console.log(\"delegue \" + delegue);\n}\n\n// lance le vote de confiance sur le ministre actif choisi par le précédent délégué\nexport function voteDeConfiance(joueur, ministreActif) {\n\n    title.textContent = \"\";\n\n    if (joueur === \"autre\") {\n        displayMessage(\"replace\", messages.voteConfiance.init[\"autres1\"]);\n        displayButton(['oui', 'non']);\n    } else if (joueur === \"ministreActif\" || joueur === \"delegue\") {\n        displayMessage(\"replace\", messages.voteConfiance.init[\"ministre+delegue\"]);\n    } else {\n        console.log(\"Erreur : la variable 'joueur' ne correspond à aucune des valeurs attendues ('autre', 'ministreActif', 'delegue'\");\n    }\n\n}\n\n// après avoir lancé le vote de confiance on reçoit un ensemble de \"oui\" ou \"non\" de la part des joueurs\n// la fonction permet de délibérer si on garde ce ministre actif ou pas\nexport function deliberationVoteConfiance(reponsesDesJoueurs) {\n\n    //reponsesDesJoueurs est de type\n    //  reponsesDesJoueurs = {\n    //     \"Ministre de l'Education\":\"oui\",\n    //     \"Ministre de l'Industrie\":\"oui\",\n    //     \"Ministre de la Justice\":\"non\",\n    //     \"Ministre de l'Information\":\"oui\",\n    //     ...\n    //  }\n\n    var oui = 0;\n    var non = 0;\n    var nbReponses = 0;\n    var ministres = [];\n\n    // on compte le nombre de votes\n    for (var i in reponsesDesJoueurs) {\n        if(reponsesDesJoueurs.hasOwnProperty(i)){\n            ministres.push(i);\n            nbReponses++;\n        }\n    }\n\n    // on compatibilise le nombre de oui et de non\n    for (var i=0; i<nbReponses; i++) {\n        if (reponsesDesJoueurs[ministres[i]] === \"oui\") {\n            oui++;\n        } else {\n            non++;\n        }\n    }\n\n    if (oui > non) {\n        displayMessage(\"replace\", messages.voteConfiance.resultat.majoriteoui);\n    } else {\n        //playSound(\"Vous avez rejeté le <joueur>. Un nouveau délégué va être désigné\")\n\n        // on affiche d'abord un message comme quoi le vote de confiance a échoué\n        displayMessage(\"replace\", messages.voteConfiance.resultat.majoritenon);\n        setTimeout(function() {\n\n            // puis on affiche une animation des noms de joueurs à la suite pour montrer qu'il y a un tirage au sort\n            var animHasard = setInterval(function() {\n                var index = Math.floor(Math.random()*listeDesMinistresRestant.length);\n                var message = listeDesMinistresRestant[index];\n                displayMessage(\"replace\", message);\n            }, 70);\n\n            // enfin on affiche un joueur désigné au hasard par la machine\n            setTimeout(function(){\n                clearInterval(animHasard);\n                var index = Math.floor(Math.random()*ministres.length);\n                displayMessage(\"replace\", ministres[index] + \" \" + messages.voteConfiance.resultat.nouveauchoix);\n                console.log(\"le nouveau ministre actif est \" + ministres[index]);\n            },4000);\n        }, 2000);\n\n    }\n\n}\n\n\n\n\n// fonction à lancer pour que le Délégué puisse choisir sa loi parmi les 2 choix\nexport function playerTwoLawSelection() {\n\n    clear();\n\n    background([0,0,255]);\n    createLaws(2);\n    setLaws(lawsArray);\n    document.querySelector('.valider').addEventListener('click', function(e, socket){\n        displayFinalLaw(e, socket);\n    });\n\n}\n\n// fonction à lancer pour que le joueur 1 puisse choisir ses 2 lois parmi les 3 choix\nexport function playerOneLawSelection() {\n\n    clear();\n\n    background([0,0,255]);\n\n    // afficher le message d'action a faire\n    displayMessage(messages.tireTroisLois);\n    createLaws(3);\n\n    // Ajoute les listeners\n    setTimeout(function() {generateLaw(0);}, 1000);\n    setTimeout(function() {generateLaw(1);}, 1200);\n    setTimeout(function() {generateLaw(2);}, 1400);\n\n    // event listener pour envoyer le choix du DÉLÉGUÉ parmis les 2 cartes\n    document.querySelector('.valider').addEventListener('click', sendChoicesToPlayerTwo);\n\n}\n\n// fonction à lancer pour la phase d'élimination\nexport function elimination() {\n\n    clear();\n\n    background([255,0,0]);\n    displayTitle(\"Élimination\");\n\n    setTimeout(function() {\n        if (premierTour) {\n            title.textContent = \"\";\n            displayMessage(\"replace\", messages.elimination[\"premier tour\"]);\n            displayButton([\"oui\", \"non\"]);\n            document.querySelector('.doublechoix').style.top = \"60%\"; // on modifie légèrement la marge comme le message est long\n        } else {\n            displayMessage(\"replace\", messages.elimination.init);\n            displayButton([\"oui\", \"non\"]);\n        }\n    }, titleDuration);\n\n    setTimeout(function() {\n        eliminateSomeone(listeDesMinistresRestant);\n    }, 3000);\n\n\n\n}\n\n\n\n\n\n/***************\n *\n *   Introduction\n *\n ***************/\n\n// indique aux joueurs de brancher leurs casques\nexport function brancheCasque() {\n\n    clear();\n    background([0,0,0]);\n    displayMessage(\"replace\", \"Est-ce que ton casque est bien branché ?\");\n    displayButton(\"oui\", ()=>{\n        var returnMessage = function () {\n            console.log(\"coucou\");\n            displayMessage(\"replace\", \"Merci.<br>Votre assignation ministairielle va vous être envoyée.\");\n            document.querySelector(\".oui\").removeEventListener(\"click\", returnMessage);\n        };\n        document.querySelector(\".oui\").addEventListener(\"click\", returnMessage);\n    });\n\n}\n\n// indique aux joueurs d'aller s'installer à leur place\nexport function installation() {\n\n    clear();\n    background([0,0,0]);\n\n    displayMessage(\"replace\", \"Tu es Ministre de l'Education. Tu peux aller t'installer à ta place\");\n    displayButton([\"autre\", \"Je suis assis à ma place\"]);\n\n    // si les joueurs mettent trop de temps à se connecter.\n    setTimeout(function () {\n        displayMessage(\"add\", \"Dis-leur de se dépêcher, on a pas toute la nuit\");\n    }, 10000);\n}\n\n// demande aux joueurs s'ils ont compris ou pas les règles.\nexport function ecouteDesRegles() {\n\n    clear();\n    background([0,0,0]);\n    displayButton([\"autre\", \"J'ai compris les règles\", \"Je souhaite les réécouter\"]);\n    // displayButton([\"autre\", \"Je souhaite les réécouter\"]);\n\n}\n\n\n\n\n/***************\n *\n *   Fonctions pour le système d'élimination\n *\n ***************/\n\n// afficher le potentiometre pour le vote\nexport function eliminateSomeone(listeDesMinistresRestant) {\n\n    clear();\n\n    displayMessage(\"replace\", messages.elimination.choisi);\n    displayButton(\"valider\");\n\n    document.querySelector('.potentiometer').style.display = \"block\";\n    placeCursorBeginning();\n    document.body.addEventListener('touchmove', function(e){\n        var playerToEliminate = moveCursor(e, listeDesMinistresRestant);\n        console.log(\"player \" + playerToEliminate);\n        document.querySelector('.valider').addEventListener('click', displayEliminatedPlayer(playerToEliminate));\n    });\n\n    //return playerToEliminate (nom du ministrer, exemple \"Ministre de l'éducation\");\n\n}\n\n// afficher le joueur elliminé\nexport function displayEliminatedPlayer(playerData_Name) {\n\n    // displayMessage(\"replace\", messages.joueurElimine + playerData_Name);\n    console.log(\"playyyyyyyyer \" + playerData_Name);\n}\n\nexport function giveYourVoteToSomeone(listeDesMinistresRestant) {\n\n    clear();\n    background([255,0,0]);\n\n    document.querySelector('.potentiometer').style.display = \"block\";\n    placeCursorBeginning();\n    document.body.addEventListener('touchmove', function(e){\n        moveCursor(e, listeDesMinistresRestant);\n    });\n    title.innerHTML = \"\";\n    displayMessage(\"replace\", messages.donneTonVote);\n    displayButton(\"valider\");\n\n}\n\nexport function placeCursorBeginning() {\n\n    var i = 180;\n\n    //donne une taille au rond intérieur en fonction de la taille de wheel\n    subwheel.style.width = Math.floor((wheel.clientWidth)/2) + \"px\";\n    subwheel.style.height = Math.floor((wheel.clientHeight)/2) + \"px\";\n    subwheel.style.borderRadius = Math.floor((wheel.clientWidth)/4) + \"px\";\n    radius = parseInt(subwheel.style.borderRadius);\n\n    var x = Math.cos(i*Math.PI/180) * radius;\n    var y = Math.sin(i*Math.PI/180) * radius;\n\n    // positionne le cursor\n    cursor.style.left = x + \"px\";\n    cursor.style.top = y + \"px\";\n\n    // lui donne le bon translate\n    var borderParent = parseInt(subwheel.style.borderRadius);\n    var valueTranslate = borderParent - Math.floor((cursor.clientWidth)/2);\n    cursor.style.transform = \"translate(\" + valueTranslate + \"px,\" + valueTranslate + \"px)\";\n\n}\n\nexport function moveCursor(e, listeDesMinistresRestant) {\n\n    // on récupère la position x du doigt\n    var posX = (e.targetTouches[0].clientX);\n\n    // on récupère la largeur de la div qui va contenir l'arc de cercle et on calcule sa position par rapport à la taille de l'écran\n    var widthWheel = (subwheel.clientWidth)*1.8; // on a appliqué un scale sur le\n    var offsetLeftWheel = ((windowWidth-widthWheel)/2);\n\n    // si le doigt n'est pas sur l'arc de cercle (qu'il est trop à gauche ou trop à droite) on normalise les valeurs\n    if (posX < offsetLeftWheel) {\n        posX = offsetLeftWheel;\n    } else if (posX>widthWheel + offsetLeftWheel) {\n        posX = widthWheel + offsetLeftWheel;\n    }\n\n    // on est sensé mapper cette position x pour obtenir un angle entre 0 et 360\n    // ici on map entre -20 et 300 parce que ça rend plus facile la manipulation avec le doigt\n    posX = map(posX, offsetLeftWheel, offsetLeftWheel+widthWheel, 0, 380);\n\n    var i = 180 + (posX*180/(windowHeight));\n\n    if (i<180) {\n        i=180;\n    } else if (i>360) {\n        i=360;\n    }\n\n    console.log(\"i \" + i);\n\n    // calcule la position du disque sur l'arc de cercle\n    // x et y sont inversés\n    var x = Math.cos(i*Math.PI/180) * radius;\n    var y = Math.sin(i*Math.PI/180) * radius;\n\n    cursor.style.left = x + \"px\";\n    cursor.style.top = y + \"px\";\n\n\n    // on map la valeur de l'angle sur le nombre de joueurs (entre 0 et 30° = Joueur 0, entre 30 et 60 = Joueur 1 etc...)\n    // on ajoute 1 à la deuxième valeur pour que le 360 soit compris dans le dernier joueur de la liste\n    var selectedPlayer = map(i, 180, 361, 0, (listeDesMinistresRestant.length));\n\n    // on affiche le nom du joueur sélectionné\n    var playerName = subwheel.getElementsByTagName('p')[0];\n    playerName.textContent = listeDesMinistresRestant[selectedPlayer];\n\n    return selectedPlayer;\n\n\n}\n\n\n\n\n/***************\n *\n *   Fonctions-outils\n *\n ***************/\n\nexport function map(valueToMap, minInput, maxInput, minOutput, maxOutput) {\n\n    return Math.floor((valueToMap - minInput) * (maxOutput - minOutput) / (maxInput - minInput) + minOutput);\n\n}\n\nexport function background(color) {\n\n    document.getElementsByTagName('html')[0].style.backgroundColor = \"rgb(\" + color[0] + \",\" +  color[1] + \",\" + color[2] + \")\";\n}\n\n\n\n\n/***************\n *\n *   Fonctions communes aux deux phases de vote\n *\n ***************/\n\n// crée les x emplacements pour les lois\nexport function createLaws(nbCards) {\n\n    var lawsBlock = document.querySelector('.laws');\n    for (var i=0; i<nbCards; i++) {\n        var oneLaw = document.createElement(\"div\");\n        oneLaw.className += \"law\";\n        oneLaw.className += \" law-\" + i;\n        oneLaw.setAttribute('data-id', i.toString());\n        lawsBlock.appendChild(oneLaw);\n    }\n}\n\n\n\n/***************\n *\n *   Fonctions relatives à la deuxième phase de vote (joueur 2 choisi 1 lois parmi 2)\n *\n ***************/\n\n// affiche les deux lois choisies par le Ministre actif sur ecran du Délégué\nexport function setLaws(lawsArray) {\n\n    var laws = document.getElementsByClassName('law');\n\n    for (var i=0; i<laws.length; i++) {\n        laws[i].classList.add(lawsArray[i]);\n        laws[i].setAttribute('data-type', lawsArray[i].toLowerCase());\n        laws[i].addEventListener('click', selectOneLaw);\n        var lawContent = document.createElement(\"p\");\n        var cardType = lawsArray[i];\n        if (cardType === \"humaniste\") {\n            cardType = \"Humaniste\"\n        } else if (cardType === \"progressiste\") {\n            cardType = \"Progressiste\";\n        }\n        lawContent.textContent = \"Loi \" + cardType;\n        laws[i].appendChild(lawContent);\n    }\n\n\n\n}\n\n// permet au Délégué de sélectionner une loi à envoyer au serveur\nexport function selectOneLaw(e) {\n\n    var currentSelectedLaws = document.getElementsByClassName(\"selectedLaw\").length;\n\n    var thisLaw = e.target;\n\n    if (thisLaw.classList.contains(\"selectedLaw\")) {\n        thisLaw.classList.remove(\"selectedLaw\");\n        removeWarning();\n    } else {\n        if (currentSelectedLaws<1) {\n            thisLaw.classList.add(\"selectedLaw\");\n            removeWarning();\n        } else {\n            displayWarning(warnings.maxOneLaw);\n        }\n\n    }\n\n    currentSelectedLaws = document.getElementsByClassName(\"selectedLaw\").length;\n    console.log(currentSelectedLaws);\n\n    if (currentSelectedLaws === 1) {\n        displayButton(\"valider\");\n    } else {\n        removeButtons();\n    }\n\n\n\n}\n\n// envois le choix de Délégué au serveur au click sur le validé\nexport function displayFinalLaw(e, socket) {\n\n    var finalLaw = \"\";\n    var selectedLaws = document.querySelector(\".selectedLaw\");\n\n    if (selectedLaws.dataset.type === \"humaniste\" || selectedLaws.dataset.type === \"progressiste\") {\n        finalLaw = selectedLaws.dataset.type; // on récupère de data-type\n    } else {\n        console.log(\"Erreur : le data-type est incorrect\");\n    }\n\n    // envoyer loie selectionnée au server\n    socket.emit(\"finalLaw\", finalLaw);\n    console.log(finalLaw);\n\n    document.querySelector('.valider').removeEventListener('click', displayFinalLaw);\n\n}\n\n\n\n/***************\n *\n *   Fonctions relatives à la première phase de vote (joueur 1 choisi 2 lois parmi 3)\n *\n ***************/\n\n\n// choisit une loi au hasard après le setTimeout\nexport function generateLaw(i) {\n\n    //var thisLaw = document.getElementById(e.target.id);\n\n    var thisLaw = document.getElementsByClassName('law')[i];\n\n    var lawType = [\"Humaniste\", \"Progressiste\"];\n    var index = Math.floor(Math.random()*lawType.length);\n    var cardType = lawType[index];\n    var oneLaw = thisLaw;\n    oneLaw.className += \" \" + cardType.toLowerCase(); // on ajoute la class \"progressiste\" ou \"humaniste\" pour avoir le bon style\n    oneLaw.setAttribute('data-type', cardType.toLowerCase()); // on ajoute le data-type pour le récupérer plus tard\n    var lawContent = document.createElement(\"p\");\n    lawContent.textContent = \"Loi \" + cardType;\n    oneLaw.appendChild(lawContent);\n\n    thisLaw.removeEventListener('click', generateLaw);\n\n    displayedLaws++;\n\n    // quand trois lois sont affichées, on a la possibilité de les choisir\n    if (displayedLaws === 3) {\n        displayMessage(\"replace\", messages.choisiDeuxLois);\n        var laws = document.getElementsByClassName(\"law\");\n        for (var i=0; i<laws.length; i++) {\n            laws[i].addEventListener('click', selectTwoLaws);\n        }\n    }\n\n}\n\n// permet au MINITSTRE ACTIF de sélectionner les deux lois à envoyer\nexport function selectTwoLaws(e) {\n\n    var currentSelectedLaws = document.getElementsByClassName(\"selectedLaw\").length;\n\n    console.log(e);\n    var thisLaw = e.target;\n\n    if (thisLaw.classList.contains(\"selectedLaw\")) {\n        thisLaw.classList.remove(\"selectedLaw\");\n        removeWarning();\n    } else {\n        if (currentSelectedLaws<2) {\n            thisLaw.classList.add(\"selectedLaw\");\n            removeWarning();\n        } else {\n            displayWarning(warnings.maxTwoLaws);\n        }\n\n    }\n\n    currentSelectedLaws = document.getElementsByClassName(\"selectedLaw\").length;\n    console.log(currentSelectedLaws);\n\n    if (currentSelectedLaws === 2) {\n        displayButton(\"valider\");\n    } else {\n        removeButtons();\n    }\n\n}\n\n// Quand on clique sur \"Valider\" ça envoie les choix au Délégué\nexport function sendChoicesToPlayerTwo() {\n\n    var lawsArray = {   '0':'',\n        '1':''};\n    var selectedLaws = document.getElementsByClassName(\"selectedLaw\");\n\n    for(var i=0; i<selectedLaws.length; i++) {\n        if (selectedLaws[i].dataset.type === \"humaniste\" || selectedLaws[i].dataset.type === \"progressiste\") {\n            lawsArray[i] = selectedLaws[i].dataset.type; // on récupère de data-type\n        } else {\n            console.log(\"Erreur : le data-type est incorrect\");\n        }\n\n    }\n\n    // à récupérer pour le socket\n    console.log(lawsArray);\n\n    document.querySelector('.valider').removeEventListener('click', sendChoicesToPlayerTwo);\n\n}\n\n\n\n\n\n\n/***************\n *\n *   Fonctions relatives à l'affichage des éléments textuels : boutons, messages, warnings\n *\n ***************/\n\n// Affiche les différents éléments d'interface -\n\n// afficher le titre d'une phase quand on rentre dedans\nexport function displayTitle(titleToDisplay) {\n    // allume toutes les leds de la couleur de la phase\n    // affiche sur l'écran qu'on rentre en phase d'élimination\n    title.innerHTML = titleToDisplay;\n}\n\n// on peut soit envoyer un nom de bouton si c'est oui/non ou valider, par ex : displayButton(\"valider\")\n// soit envoyer un tableau de boutons si on veut \"oui\"/\"non\" : displayButton([\"oui\", \"non\"])\n// soit envoyer un ou plusieurs bouton(s) personnalisé(s) (autre) : displayButton([\"autre\", \"nom du bouton\", \"nom de l'autre bouton\"]);\nexport function displayButton(buttonToDisplay, callback) {\n\n    var button = \"\";\n\n    if(typeof buttonToDisplay !== \"string\") { // c'est-à-dire si c'est un tableau, par exemple si on veut ajouter plusieurs boutons (\"oui\" et \"non\" par ex)\n        if (buttonToDisplay[0] === \"autre\") { // si c'est un bouton personnalisé\n            button = document.getElementsByClassName(buttonToDisplay[0]);\n            for (var i=1; i<buttonToDisplay.length; i++) {\n                button[i-1].textContent = buttonToDisplay[i];\n                button[i-1].classList.add('active');\n            }\n\n        } else {\n            button = [];\n            for (var i=0; i<buttonToDisplay.length; i++) {\n                button[i] = document.querySelector(\".\" + buttonToDisplay[i]);\n                button[i].classList.add('active');\n            }\n        }\n\n        for (var j=0; j<button.length; j++) {\n            button[j].addEventListener('click', receiveButtonValue); // ajoute un lsitenner pour récupérer le contenu du bouton\n        }\n\n    } else { // c'est-à-dire si le bouton est un bouton valider ou oui ou non (tout seul)\n        button = document.querySelector(\".\" + buttonToDisplay);\n        button.classList.add('active');\n        button.addEventListener('click', receiveButtonValue); // ajoute un lsitenner pour récupérer le contenu du bouton\n    }\n\n    if(callback && typeof callback == \"function\") {\n        callback();\n    }\n}\n\n// reçoit le contenu d'un bouton quand on clique dessus\nexport function receiveButtonValue(e) {\n\n    console.log(e.target.textContent);\n    console.log(_global.socket);\n    _global.socket.emit(_global.emitToServer,{\n        \"sequence\": _global.sequence,\n        \"value\": e.target.textContent,\n    });\n\n    bienRecu(); // quand un joueur appuie sur un bouton, on lui envoie un message comme quoi on a bien reçu sa répons\n    e.target.removeEventListener('click', receiveButtonValue);\n\n}\n\n// supprimer tous les boutons\nexport function removeButtons() {\n    var buttons = document.getElementsByTagName('button');\n    for (var i=0; i<buttons.length; i++) {\n        buttons[i].classList.remove('active');\n    }\n\n}\n\n/// MESSAGE\n// envoyer un message\nexport function displayMessage(mode, message) {\n\n    if (mode === \"add\") {\n        var blocMessage = document.querySelector('.message').getElementsByTagName('p')[0];\n        blocMessage.innerHTML += \"<br>\"+message;\n    }\n\n    if (mode === \"replace\") {\n        var blocMessage = document.querySelector('.message').getElementsByTagName('p')[0];\n        blocMessage.innerHTML = message;\n    }\n\n}\n\nexport function removeMessage() {\n\n    var blocMessage = document.querySelector('.message').getElementsByTagName('p')[0];\n    blocMessage.innerHTML = \"\";\n}\n\n// WARNING\n/// afficher un warning\nexport function displayWarning(warning) {\n    var blocWarning = document.querySelector('.warning');\n    blocWarning.textContent = warning;\n    blocWarning.classList.add('active');\n\n}\n\n/// surpimer warning\nexport function removeWarning() {\n    var blocWarning = document.querySelector('.warning');\n    blocWarning.classList.remove('active');\n}\n\n\n\n// fonction pour effacer les éléments de l'interface précédente\nexport function clear() {\n\n    var elementsTexte = document.querySelectorAll('.autre, h1, p, .warning, .laws');\n    var elementsTous = document.querySelectorAll('button, h1, p, div');\n    var elementsActive = document.querySelectorAll('.active');\n\n    for (var i = 0; i<elementsTexte.length; i++) {\n        elementsTexte[i].textContent = \"\";\n    }\n\n    for (var i=0; i<elementsTous.length; i++) {\n        elementsTous[i].removeAttribute('style');\n    }\n\n    for (var i=0; i<elementsActive.length; i++) {\n        elementsActive[i].classList.remove('active');\n    }\n\n}\n\n// envoie un feedback pour dire qu'on a bien reçu le message\nexport function bienRecu() {\n    clear();\n    background([0,0,0]);\n    displayMessage(\"replace\", messages.bienrecu);\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./dev/browser/players/sequences.js\n// module id = 0\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar LoadJs = (function () {\n    function LoadJs() {\n    }\n    LoadJs.load = function (file) {\n        var jsElement = document.createElement(\"script\");\n        jsElement.type = \"text/javascript\";\n        jsElement.src = file;\n        document.body.appendChild(jsElement);\n        return jsElement;\n    };\n    return LoadJs;\n}());\nexports.default = LoadJs;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./dev/browser/LoadJs.ts\n// module id = 1\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar LocationInfo = (function () {\n    function LocationInfo(urlToParse) {\n        this.parse = document.createElement(\"a\");\n        this.parse.href = urlToParse;\n    }\n    return LocationInfo;\n}());\nexports.default = LocationInfo;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./dev/browser/locationInfo.ts\n// module id = 2\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar sequences = require(\"./sequences.js\");\nvar SocketClientApp = (function () {\n    function SocketClientApp() {\n    }\n    SocketClientApp.run = function (currentHostname) {\n        var socket = io.connect(\"http://\" + currentHostname + \":1337\");\n        sequences._global.socket = socket;\n        socket.on(\"connect\", function () {\n            console.log(\"socket client player connected\");\n            socket.emit('player-connected', {\n                name: \"player\"\n            });\n        });\n        socket.on(\"init\", function (data) {\n            console.log(data);\n            sequences.displayMessage(\"replace\", \"vous etes \" + data.action.options);\n        });\n        socket.on(\"playerTwoLawSelection\", function () {\n            sequences.playerTwoLawSelection();\n        });\n        socket.on(\"playerOneLawSelection\", function () {\n            sequences.playerOneLawSelection();\n        });\n        socket.on(\"elimination\", function () {\n            sequences.elimination();\n        });\n        socket.on(\"brancheCasque\", function () {\n            sequences.brancheCasque();\n            sequences._global.sequence = \"casque\";\n            sequences._global.emitToServer = \"casque-ok\";\n        });\n        socket.on(\"installation\", function () {\n            sequences.installation();\n        });\n        socket.on(\"ecouteDesRegles\", function () {\n            sequences.ecouteDesRegles();\n        });\n        socket.on(\"eliminateSomeone\", function (listeDesMinistresRestant) {\n            sequences.eliminateSomeone(listeDesMinistresRestant);\n        });\n        socket.on(\"displayEliminatedPlayer\", function (playerData_Name) {\n            sequences.displayEliminatedPlayer(playerData_Name);\n        });\n        socket.on(\"giveYourVoteToSomeone\", function (nombreDeJouerRestant) {\n            sequences.giveYourVoteToSomeone(nombreDeJouerRestant);\n        });\n        socket.on(\"setLaws\", function (lawsArray) {\n            sequences.setLaws(lawsArray);\n        });\n        socket.on(\"displayButton\", function (buttonToDisplay) {\n            sequences.displayButton(buttonToDisplay);\n        });\n        socket.on(\"removeButtons\", function () {\n            sequences.removeButtons();\n        });\n        socket.on(\"displayMessage\", function (data) {\n            sequences.displayMessage(data.mode, data.message);\n        });\n        socket.on(\"removeMessage\", function () {\n            sequences.removeMessage();\n        });\n        socket.on(\"displayWarning\", function (warning) {\n            sequences.displayWarning(warning);\n        });\n        socket.on(\"removeWarning\", function () {\n            sequences.removeWarning();\n        });\n        socket.on(\"clear\", function () {\n            sequences.clear();\n        });\n        socket.on(\"log\", function (data) {\n            console.log(data);\n        });\n    };\n    return SocketClientApp;\n}());\nexports.default = SocketClientApp;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./dev/browser/players/socketClientApp.ts\n// module id = 3\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar socketClientApp_1 = require(\"./socketClientApp\");\nvar LoadJs_1 = require(\"../LoadJs\");\nvar locationInfo_1 = require(\"../locationInfo\");\nvar sequences = require(\"./sequences.js\");\nvar locationInfo = new locationInfo_1.default(window.location.href);\nvar currentHostname = locationInfo.parse.hostname;\nLoadJs_1.default.load(\"http://\" + currentHostname + \":1337/socket.io/socket.io.js\").addEventListener(\"load\", function () {\n    socketClientApp_1.default.run(currentHostname);\n});\nconsole.log(radius);\nwindow.playerOneLawSelection = function () { sequences.playerOneLawSelection(); };\nwindow.playerTwoLawSelection = function () { sequences.playerTwoLawSelection(); };\nwindow.elimination = function () { sequences.elimination(); };\nwindow.installation = function () { sequences.installation(); };\nwindow.brancheCasque = function () { sequences.brancheCasque(); };\nwindow.ecouteDesRegles = function () { sequences.ecouteDesRegles(); };\nwindow.eliminateSomeone = function () { sequences.eliminateSomeone(); };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./dev/browser/players/main.ts\n// module id = 4\n// module chunks = 0"],"sourceRoot":""}